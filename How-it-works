ğŸ“¦ What's the Problem?
Our billing records are stored in Azure Cosmos DB.

It's getting expensive because:

There are millions of records.

Old records (3+ months) are rarely used.

We want to save money but still keep the data available.

âœ… Our Smart Solution
We use serverless Azure Functions to:

Move old data to cheaper storage (Blob Storage)

Read data from the right place (new = Cosmos DB, old = Blob)

âš™ï¸ Step-by-Step Flow
Step 1: Archiving Old Data
Azure runs archive_function.py automatically (like a robot).

It checks Cosmos DB.

If a record is older than 3 months:

It saves the record in Azure Blob Storage.

Then it deletes it from Cosmos DB.

ğŸ‘‰ This reduces the cost of storing old data.

Step 2: Reading a Record
A user requests a billing record.

Azure runs read_function.py.

That function:

Checks if the record is new â†’ reads from Cosmos DB.

If itâ€™s old â†’ reads from Blob Storage.

ğŸ‘‰ Users never know the difference. They just get their data.

ğŸ§  Why Itâ€™s Great
ğŸ’° Cheaper (Blob Storage is way cheaper than Cosmos DB)

âš¡ Fast enough (users get old data in a few seconds)

ğŸ› ï¸ No API changes needed

â˜ï¸ Serverless = less maintenance
